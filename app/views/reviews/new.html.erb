<h3 class="text-center mb-4" style="color: #751F1F;"><%= @book.title %></h3>

<div class="container p-4 rounded" style="max-width: 600px;">
  <%= form_with model: [@book, @review], local: true, data: { controller: "review-form" } do |form| %>

    <!-- Review Content -->
    <div class="mb-3">
      <%= form.label :content, "Your review", class: "form-label" %>
      <%= form.text_area :content, rows: 5, class: "form-control d-flex align-items-center bg-light rounded-4 px-3 shadow-sm py-1 w-100", placeholder: "Share your thoughts..." %>
    </div>

    <!-- Rating (Stars) -->
    <div class="mb-3">
      <%= form.label :rating, "Your rating", class: "form-label" %>
      <div class="d-flex justify-content-center gap-2 fs-4">
        <% (1..5).each do |n| %>
          <i class="fa-star far text-warning cursor-pointer"
             id="star-<%= n %>"
             data-value="<%= n %>"
             data-action="click->review-form#selectStar"
             style="cursor: pointer;"></i>
        <% end %>
      </div>
      <%= form.hidden_field :rating, id: "rating-input", data: { review_form_target: "ratingInput" } %>
    </div>

    <!-- Emotion -->
    <div class="mb-3">
      <%= form.label :emotion, "How did you feel?", class: "form-label" %>
      <div class="d-flex gap-2">
        <% ["Nostalgique" ,"Heureux", "Triste"].each do |emotion| %>
          <button type="button" class="btn bg-white rounded-pill"
                  id="emotion-btn-<%= emotion.parameterize %>"
                  data-emotion="<%= emotion %>"
                  data-id="<%= emotion.parameterize %>"
                  data-action="click->review-form#selectEmotion">
            <%= emotion %>
          </button>
        <% end %>
      </div>
      <%= form.hidden_field :emotion, id: "emotion-input", data: { review_form_target: "emotionInput" } %>
    </div>

    <!-- Favorite Characters -->
    <div class="mb-4">
      <%= form.label :favorite_characters, "Your favorite characters", class: "form-label" %>
      <div class="d-flex flex-wrap gap-2">
        <% ["Juan PÃ©lardon","Anthony d'Auvergne", "Samuel Parmagiano"].each do |char| %>
          <button type="button" class="btn bg-white rounded-pill"
                  id="char-btn-<%= char.parameterize %>"
                  data-character="<%= char %>"
                  data-id="<%= char.parameterize %>"
                  data-action="click->review-form#selectCharacter">
            <%= char %>
          </button>
        <% end %>
      </div>
      <%= form.hidden_field :favorite_characters, id: "character-input", data: { review_form_target: "characterInput" } %>
    </div>

    <!-- Submit -->
    <div class="d-grid">
      <%= form.submit "Submit Review", class: "btn btn-outline-dark rounded-pill", style: "color: #751F1F; border-color: #751F1F;" %>
    </div>

  <% end %>
</div>